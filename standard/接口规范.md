# 接口规范

>- 所有的返回数据都要配合全局状态码；
>- 接口参数 requestData 中的 *XXX* 需要根据实际业务需求进行替换，其他参数为固定接口参数；
>- 接口返回值 returnData 中的 *KEY* 需要根据实际业务需求进行替换，格式要保持统一，其他返回参数为固定接口参数。


[TOC]

[TOC]

{:toc}


## `STATUS_CODE` 状态码

| 状态码  | 说明          |
| :--: | ----------- |
|  0   | 成功（success） |
|  1   | 失败（error）   |
|      |             |
| 100  | 参数错误        |
|      |             |
| 200  | 登录校验        |
| 201  | 用户名或密码错误    |
| 202  | 登陆超时或别处登录   |
|      |             |
| 300  | 数据已存在       |
|      |             |
| 400  | 数据不存在       |
|      |             |
| 500  | 服务器错误       |


## 查询

### 单条数据

#### XXX接口
`URL` : /app/interface/getItem

`Method` : POST / GET

`requestData`：

| 参数名   | 必选   | 类型及范围  | 说明         |
| ----- | ---- | ------ | ---------- |
| *XXX* | √    | string | 如用户ID[^示例] |

*接口参数示例*

```json
{
  "MEMBER_ID":"123"
}
```

`returnData` :

| 返回键         | 类型     | 返回值             | 说明         |
| ----------- | ------ | --------------- | ---------- |
| STATUS_CODE | int    | 状态码             | 参考上方的全局状态码 |
| MSG         | string | 返回状态信息          | 如操作成功，可以为空 |
| KEY1        | int    | 响应字段值1[^示例]     |            |
| KEY2        | string | 响应字段值2[^示例]     |            |
| KEY3        | object | 响应字段值3[^示例]     | 可以依然包含对象   |
| - KEY3_KEY1 | string | - 响应字段值3-1[^示例] |            |
| - KEY3_KEY2 | string | - 响应字段值3-2[^示例] |            |

*（接口返回数据示例，可以直接将测试数据粘贴过来）*

```json
//测试地址 => http://123.57.89.97:8080/t2o/app/forum/listForumByActivity?ACTIVITY_ID=1f423553e3534b20b01523a08460a981&MEMBER_ID=58b6195bfe804fbb94dadac5f500124b&TYPE=2&showCount=10&currentPage=1

{
  "STATUS_CODE": 0, //=>状态码，必需
  "MSG": "success", //=>返回信息，必需
  // 以下字段需要根据实际业务需求替换
  "KEY1": "响应字段值1",
  "KEY2": "响应字段值2",
  "KEY3": {
    "KEY3_KEY1": "响应字段值3-1",
    "KEY3_KEY2": "响应字段值3-2"
  }
}
```



### 列表数据

#### XXX接口
`URL` : /app/interface/getList

`Method` : POST / GET

`requestData`：

| 参数名        | 必选   | 类型及范围  | 说明               |
| ---------- | ---- | ------ | ---------------- |
| *XXX*      | √    | string | 如用户ID[^示例]       |
| PAGE_INDEX |      | int    | 页码，不传默认获取第一页     |
| SHOW_COUNT |      | int    | 每页显示条数，不传默认每页10条 |

```json
{
  "MEMBER_ID":"123",
  "PAGE_INDEX":1,
  "SHOW_COUNT":10
}
```

`returnData` :

| 返回键          | 类型            | 返回值            | 说明                    |
| ------------ | ------------- | -------------- | --------------------- |
| STATUS_CODE  | int           | 状态码            | 参考上方的全局状态码            |
| MSG          | string        | 返回状态信息         | 如操作成功，可以为空            |
| CURRENT_PAGE | int           | 当前页码           |                       |
| PAGE_COUNT   | int           | 总页数            |                       |
| *KEY1*       | int           | 响应字段值1[^示例]    |                       |
| *KEY2*       | string        | 相应字段值2[^示例]    |                       |
| LIST         | Array[Object] | 对象列表           | LIST为空时显示 *"LIST":[]* |
| - *KEY*      | string        | - 对象列表字段值[^示例] |                       |

```js
//测试地址 => http://123.57.89.97:8080/t2o/app/forum/listForumByActivity?ACTIVITY_ID=1f423553e3534b20b01523a08460a981&MEMBER_ID=58b6195bfe804fbb94dadac5f500124b&TYPE=2&showCount=10&currentPage=1

{
  "STATUS_CODE": 0, //=>状态码，必需
  "MSG": "success", //=>返回信息，必需
  "CURRENT_PAGE": 1, //=>当前页码
  "PAGE_COUNT": 10, //=>总页数
  "KEY1": 123,
  "KEY2": "",
  "LIST": [ //=> 列表数组
    {"KEY": "对象列表字段值"},
    {"KEY": "对象列表字段值"}
  ]
}
```



## 操作

### 增/删/改
#### XXX接口
`URL` : /app/interface/add

`Method` : POST

`requestData`：

| 参数名   | 必选   | 类型及范围  | 说明         |
| ----- | ---- | ------ | ---------- |
| *XXX* | √    | string | 如用户ID[^示例] |
| *XXX* |      | string | 如昵称[^示例]   |

```json
{
  "MEMBER_ID":"123"
}
```

`returnData` :

| 返回键         | 类型     | 返回值            | 说明         |
| ----------- | ------ | -------------- | ---------- |
| STATUS_CODE | int    | 状态码            | 参考上方的全局状态码 |
| MSG         | string | 返回状态信息         | 如操作成功，可以为空 |
| ID          | int    | 增、删、改数据的ID或者标志 |            |

```js
//测试地址 => http://123.57.89.97:8080/t2o/app/forum/listForumByActivity?ACTIVITY_ID=1f423553e3534b20b01523a08460a981&MEMBER_ID=58b6195bfe804fbb94dadac5f500124b&TYPE=2&showCount=10&currentPage=1

{
  "STATUS_CODE": 0, //=>状态码，必需
  "MSG": "success", //=>返回信息，必需
  "ID": 1
}
```

## 上传

### Base64上传图片
#### XXX接口
`URL` : /app/interface/uploadBase64

`Method` : POST

`requestData`：

| 参数名   | 必选   | 类型及范围  | 说明             |
| ----- | ---- | ------ | -------------- |
| *XXX* |      | string | 如用户ID[^示例]     |
| FILE  | √    | string | 图片文件的Base64字符串 |

```json
{
  "MEMBER_ID":"123"
}
```

`returnData` :

| 返回键         | 类型     | 返回值         | 说明         |
| ----------- | ------ | ----------- | ---------- |
| STATUS_CODE | int    | 状态码         | 参考上方的全局状态码 |
| MSG         | string | 返回状态信息      | 如操作成功，可以为空 |
| FILE_PATH   | int    | 文件上传后的服务器路径 |            |

```js
//测试地址 => http://123.57.89.97:8080/t2o/app/forum/listForumByActivity?ACTIVITY_ID=1f423553e3534b20b01523a08460a981&MEMBER_ID=58b6195bfe804fbb94dadac5f500124b&TYPE=2&showCount=10&currentPage=1

{
  "STATUS_CODE": 0, //=>状态码，必需
  "MSG": "success", //=>返回信息，必需
  "FILE_PATH": "xxx/xxx.png" //=>保存的文件路径
}
```

### 文件流上传
#### XXX接口
`URL` : /app/interface/uploadFile

`Method` : POST

`requestData`：

| 参数名   | 必选   | 类型及范围  | 说明         |
| ----- | ---- | ------ | ---------- |
| *XXX* |      | string | 如用户ID[^示例] |
| FILE  | √    | file   | 文件对象       |

```json
{
  "MEMBER_ID":"123",
  "FILE":"..."
}
```

`returnData` :

| 返回键         | 类型     | 返回值         | 说明         |
| ----------- | ------ | ----------- | ---------- |
| STATUS_CODE | int    | 状态码         | 参考上方的全局状态码 |
| MSG         | string | 返回状态信息      | 如操作成功，可以为空 |
| FILE_PATH   | int    | 文件上传后的服务器路径 |            |

```js
//测试地址 => http://123.57.89.97:8080/t2o/app/forum/listForumByActivity?ACTIVITY_ID=1f423553e3534b20b01523a08460a981&MEMBER_ID=58b6195bfe804fbb94dadac5f500124b&TYPE=2&showCount=10&currentPage=1

{
  "STATUS_CODE": 0, //=>状态码，必需
  "MSG": "success", //=>返回信息，必需
  "FILE_PATH": "xxx/xxx.png" //=>保存的文件路径
}
```






> - JSON格式化工具：http://jsoneditoronline.org/index.html?referrer=chrome_app
> - 接口测试工具：http://www.getpostman.com

